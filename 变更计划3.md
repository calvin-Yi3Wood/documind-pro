补充提示词
提示词 18：项目管理系统完整实现
请实现完整的项目/文档管理系统：

1. **创建 services/storage/project.ts**
   - Project 接口: { id, title, content, sources, chatHistory, lastSaved, createdAt }
   - loadProjects(): Project[] - 从 localStorage 加载
   - saveCurrentProject(project: Project) - 保存到 localStorage
   - renameProject(id: string, newTitle: string)
   - deleteProject(id: string)
   - createNewProject(): Project

2. **创建 hooks/useProject.ts**
   - projects: Project[] 状态
   - currentProjectId 状态
   - loadProject(project)
   - createNewProject()
   - renameProject(id, title)
   - deleteProject(id)
   - autoSave 定时器

3. **创建项目库弹窗组件 components/features/project/ProjectLibrary.tsx**
   - 网格布局显示所有项目
   - 项目卡片：图标、标题、时间
   - 操作菜单：重命名、导出、删除
   - 删除确认对话框

4. **修改 Dashboard page.tsx**
   - 集成 useProject hook
   - 添加项目库按钮到头部
   - 项目切换时重新加载编辑器内容

参考原项目 App.tsx:72-155 和 services/storageService.ts

提示词 19：文件导入导出系统实现
请实现完整的文件导入导出系统：

1. **创建 services/file/parser.ts**
   - parseDocx(file: File): Promise<string> - 使用 Mammoth.js
   - parsePdf(file: File): Promise<string> - 使用 PDF.js
   - parseXlsx(file: File): Promise<string> - 使用 SheetJS
   - parseFile(file: File): Promise<{ content: string; type: string }>

2. **创建 services/file/exporter.ts**
   - exportAsHTML(title: string, content: string): void
   - exportAsMarkdown(title: string, content: string): void
   - exportAsDoc(title: string, content: string): void
   - exportAsPdf(): void - 使用 window.print()
   - exportAsXlsx(title: string, content: string): void
   - downloadFile(content: string, filename: string, mimeType: string)

3. **更新 package.json 添加依赖**
   - mammoth (DOCX 解析)
   - pdfjs-dist (PDF 解析)  
   - xlsx (Excel 处理)

4. **创建导出菜单组件 components/features/export/ExportMenu.tsx**
   - 下拉菜单：Word、Excel、PDF、HTML、Markdown
   - 每种格式的图标和说明

5. **创建导入按钮组件**
   - 支持拖拽上传
   - 文件类型过滤 (.docx, .pdf, .xlsx, .md, .txt)
   - 加载状态显示

参考原项目 App.tsx:158-530

提示词 20：AI Diff 编辑系统实现
请实现 AI 编辑差异对比系统：

1. **创建 lib/editor/aiEdit.ts**
   - cleanAIContent(text: string): string
     - 移除 COT 思考过程标记
     - 移除解释性语句
     - 移除多余空行
   - parseMultipleSuggestions(content: string): string[]
     - 解析 "方案一"、"方案二" 格式
     - 返回清洗后的建议数组
   - buildDiffContainer(originalText: string, suggestions: string[], diffId: string): string
     - 生成差异对比 HTML 块

2. **创建选区定位恢复系统**
   - savedSelectionRef: { range, text, contextBefore, contextAfter }
   - findTextInEditor(editorElement: HTMLElement, searchText: string): Range | null
   - 使用 TreeWalker 遍历文本节点
   - 支持跨节点搜索

3. **在 Dashboard/Editor 中集成**
   - 保存选区时记录上下文
   - AI 返回后定位到原选区位置
   - 插入差异对比块
   - 添加接受/拒绝按钮处理

4. **添加 CSS 样式 (app/globals.css)**
   - .ai-diff-container 样式
   - .ai-diff-old-text 删除线样式
   - .ai-diff-new-text 高亮样式
   - .ai-diff-accept/.ai-diff-reject 按钮样式

参考原项目 App.tsx:532-895

提示词 21：完善 prompts 配置文件
请完善 config/prompts.ts 系统提示词配置：

1. **创建 config/prompts.ts**

const SYSTEM_PROMPTS = {
  DEFAULT: `你是一个智能文档助手...`,
  
  DEEPSEEK: `你是一个专业的中文文档助手...
    能力:
    1. 写作: 专家级的起草、润色和编辑能力
    2. 数据可视化: 生成 Chart.js/ECharts 配置
    3. 思维导图: 生成 Mermaid 格式
    4. 文本优化规则...
  `,
  
  DEEPSEEK_REASONER: `你是一个思考型文档助手...
    在回答之前，先进行深度思考...
    将思考过程放在 <thinking> 标签中...
  `,
  
  IMAGE_GENERATION: `你是一个图片生成提示词专家...`,
  
  DOCUMENT_ANALYSIS: `你是一个文档分析专家...`,
  
  VISUALIZATION: `你是一个数据可视化专家...
    Chart.js 配置示例...
    Mermaid 思维导图语法...
    [VISUAL_DATA] 输出格式...
  `,
};

export function buildSystemMessage(type: keyof typeof SYSTEM_PROMPTS = 'DEFAULT'): string {
  return SYSTEM_PROMPTS[type] || SYSTEM_PROMPTS.DEFAULT;
}

参考原项目 FloatingAgent.tsx:362-448 的完整 System Prompt

提示词 22：环境变量示例和健康检查
请创建环境配置和健康检查：

1. **创建 .env.example**
# AI Services
GEMINI_API_KEY=your_gemini_api_key
DEEPSEEK_API_KEY=your_deepseek_api_key
DEFAULT_DEEPSEEK_MODEL=deepseek-chat

# Supabase (可选)
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# NextAuth
NEXTAUTH_SECRET=your_random_secret
NEXTAUTH_URL=http://localhost:3000

# OAuth (可选)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Development
NEXT_PUBLIC_DEV_MODE=true

2. **完善 /api/health/route.ts**
   - 检查各 AI 服务可用性
   - 检查数据库连接
   - 返回详细状态信息

3. **创建 README.md 配置说明**
   - 环境变量说明
   - 快速启动指南
   - 功能列表

